<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåç WeatherGuessr</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .game-area {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .weather-info {
            flex: 1;
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }
        
        .weather-display {
            text-align: center;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        .temperature {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .map-container {
            flex: 2;
            position: relative;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            backdrop-filter: blur(5px);
            overflow: hidden;
        }
        
        #worldMap {
            width: 100%;
            height: 400px;
            cursor: crosshair;
            display: block;
        }
        
        .pointer {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ff4444;
            border: 3px solid white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
        }
        
        .controls {
            text-align: center;
            margin-top: 20px;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .result {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }
        
        .leaderboard {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }
        
        .leaderboard h3 {
            margin-top: 0;
            text-align: center;
            font-size: 1.5em;
        }
        
        .leaderboard-entry {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .loading {
            text-align: center;
            font-size: 1.2em;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåç WeatherGuessr</h1>
        <p class="subtitle">Guess where this weather is happening. Click on the map to place your guess, then hit Confirm.</p>
        
        <div class="game-area">
            <div class="weather-info">
                <div class="weather-display" id="weatherDisplay">
                    <div class="loading">Loading weather...</div>
                </div>
            </div>
            
            <div class="map-container">
                <svg id="worldMap" viewBox="0 0 1000 500">
                    <!-- Simplified world map -->
                    <rect width="1000" height="500" fill="#4a90e2"/>
                    
                    <!-- Continents (simplified shapes) -->
                    <path d="M100 200 L200 180 L300 200 L350 250 L300 300 L200 280 L100 260 Z" fill="#8bc34a"/>
                    <path d="M180 150 L280 140 L380 160 L420 200 L380 240 L280 220 L180 190 Z" fill="#8bc34a"/>
                    <path d="M450 180 L600 170 L750 190 L800 240 L750 290 L600 270 L450 250 Z" fill="#8bc34a"/>
                    <path d="M650 200 L750 190 L850 210 L900 260 L850 310 L750 290 L650 270 Z" fill="#8bc34a"/>
                    <path d="M50 300 L150 290 L250 310 L200 350 L100 340 L50 320 Z" fill="#8bc34a"/>
                    <path d="M750 320 L850 310 L900 330 L880 370 L800 360 L750 340 Z" fill="#8bc34a"/>
                    <path d="M400 350 L500 340 L600 360 L580 400 L480 390 L400 370 Z" fill="#8bc34a"/>
                </svg>
            </div>
        </div>
        
        <div class="controls">
            <button id="confirmBtn" disabled>Confirm Guess</button>
            <button id="playAgainBtn" style="display: none;">Play Again</button>
        </div>
        
        <div id="result" class="result" style="display: none;"></div>
        
        <div class="leaderboard">
            <h3>üèÜ Top 10 Closest Guesses</h3>
            <div id="leaderboardList">
                <div class="leaderboard-entry">
                    <span>1. Anonymous</span>
                    <span>127 km</span>
                </div>
                <div class="leaderboard-entry">
                    <span>2. Anonymous</span>
                    <span>245 km</span>
                </div>
                <div class="leaderboard-entry">
                    <span>3. Anonymous</span>
                    <span>389 km</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentGuess = null;
        let currentWeather = null;
        let gameActive = false;
        let guessPointer = null; // Track the pointer element
        
        // Weather data (simplified for demo)
        const weatherData = [
            { city: "Tokyo", country: "Japan", temp: 23, condition: "Sunny", humidity: 65, wind: "12 km/h", coords: [700, 220] },
            { city: "London", country: "UK", temp: 15, condition: "Cloudy", humidity: 78, wind: "8 km/h", coords: [480, 180] },
            { city: "Sydney", country: "Australia", temp: 28, condition: "Partly Cloudy", humidity: 60, wind: "15 km/h", coords: [780, 350] },
            { city: "New York", country: "USA", temp: 18, condition: "Rainy", humidity: 82, wind: "10 km/h", coords: [250, 200] },
            { city: "Cairo", country: "Egypt", temp: 32, condition: "Hot", humidity: 35, wind: "6 km/h", coords: [520, 250] },
            { city: "Moscow", country: "Russia", temp: 8, condition: "Snow", humidity: 88, wind: "20 km/h", coords: [600, 170] },
            { city: "Mumbai", country: "India", temp: 29, condition: "Humid", humidity: 90, wind: "14 km/h", coords: [650, 240] },
            { city: "S√£o Paulo", country: "Brazil", temp: 22, condition: "Thunderstorm", humidity: 75, wind: "18 km/h", coords: [320, 340] }
        ];
        
        // Initialize game
        function initGame() {
            // Clear any existing pointer
            clearPointer();
            
            currentWeather = weatherData[Math.floor(Math.random() * weatherData.length)];
            currentGuess = null;
            gameActive = true;
            
            // Reset UI
            document.getElementById('confirmBtn').disabled = true;
            document.getElementById('playAgainBtn').style.display = 'none';
            document.getElementById('result').style.display = 'none';
            
            // Display weather
            displayWeather();
            
            // Add map click listener
            const map = document.getElementById('worldMap');
            map.addEventListener('click', handleMapClick);
            map.style.cursor = 'crosshair';
        }
        
        function clearPointer() {
            // Remove existing pointer if it exists
            if (guessPointer) {
                guessPointer.remove();
                guessPointer = null;
            }
        }
        
        function displayWeather() {
            const weatherDisplay = document.getElementById('weatherDisplay');
            weatherDisplay.innerHTML = `
                <div class="temperature">${currentWeather.temp}¬∞C</div>
                <div><strong>Condition:</strong> ${currentWeather.condition}</div>
                <div><strong>Humidity:</strong> ${currentWeather.humidity}%</div>
                <div><strong>Wind:</strong> ${currentWeather.wind}</div>
                <div style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
                    Click on the map to guess the location!
                </div>
            `;
        }
        
        function handleMapClick(event) {
            if (!gameActive) return;
            
            const rect = event.currentTarget.getBoundingClientRect();
            const x = ((event.clientX - rect.left) / rect.width) * 1000;
            const y = ((event.clientY - rect.top) / rect.height) * 500;
            
            currentGuess = { x, y };
            
            // Clear previous pointer
            clearPointer();
            
            // Create new pointer
            guessPointer = document.createElement('div');
            guessPointer.className = 'pointer';
            guessPointer.style.left = `${(x / 1000) * 100}%`;
            guessPointer.style.top = `${(y / 500) * 100}%`;
            
            const mapContainer = document.querySelector('.map-container');
            mapContainer.appendChild(guessPointer);
            
            // Enable confirm button
            document.getElementById('confirmBtn').disabled = false;
        }
        
        function calculateDistance(guess, actual) {
            const dx = guess.x - actual[0];
            const dy = guess.y - actual[1];
            return Math.sqrt(dx * dx + dy * dy);
        }
        
        function confirmGuess() {
            if (!currentGuess || !gameActive) return;
            
            gameActive = false;
            
            // Calculate distance
            const distance = calculateDistance(currentGuess, currentWeather.coords);
            const kmDistance = Math.round(distance * 10); // Convert to approximate km
            
            // Show actual location
            const actualPointer = document.createElement('div');
            actualPointer.className = 'pointer';
            actualPointer.style.backgroundColor = '#44ff44';
            actualPointer.style.left = `${(currentWeather.coords[0] / 1000) * 100}%`;
            actualPointer.style.top = `${(currentWeather.coords[1] / 500) * 100}%`;
            
            const mapContainer = document.querySelector('.map-container');
            mapContainer.appendChild(actualPointer);
            
            // Display result
            const result = document.getElementById('result');
            result.innerHTML = `
                <h3>Result</h3>
                <p><strong>Actual location:</strong> ${currentWeather.city}, ${currentWeather.country}</p>
                <p><strong>Your distance:</strong> ${kmDistance} km away</p>
                <p><strong>Score:</strong> ${Math.max(0, 1000 - kmDistance)} points</p>
                ${kmDistance < 500 ? '<p style="color: #44ff44;">üéâ Great guess!</p>' : 
                  kmDistance < 1000 ? '<p style="color: #ffaa44;">üëç Not bad!</p>' : 
                  '<p style="color: #ff6666;">ü§î Keep trying!</p>'}
            `;
            result.style.display = 'block';
            
            // Show play again button
            document.getElementById('confirmBtn').disabled = true;
            document.getElementById('playAgainBtn').style.display = 'inline-block';
            
            // Remove click listener
            const map = document.getElementById('worldMap');
            map.removeEventListener('click', handleMapClick);
            map.style.cursor = 'default';
        }
        
        function playAgain() {
            // Clear all pointers before starting new game
            clearPointer();
            
            // Remove any additional pointers (like the actual location pointer)
            const mapContainer = document.querySelector('.map-container');
            const allPointers = mapContainer.querySelectorAll('.pointer');
            allPointers.forEach(pointer => pointer.remove());
            
            // Start new game
            initGame();
        }
        
        // Event listeners
        document.getElementById('confirmBtn').addEventListener('click', confirmGuess);
        document.getElementById('playAgainBtn').addEventListener('click', playAgain);
        
        // Start first game
        initGame();
    </script>
</body>
</html>
