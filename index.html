<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MapMyWeather - Your world’s weather mapped</title>

<!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-sA+Q0HQ8xcrShdF1b3yWbUPkYQJrP2fM7D5Jv4f4bjo="
  crossorigin=""
/>

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
    color: #222;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  header {
    background: rgba(255 255 255 / 0.7);
    padding: 1rem 2rem;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  header h1 {
    margin: 0;
    font-weight: 700;
  }

  #searchForm {
    margin-top: 0.8rem;
  }

  #searchInput {
    padding: 0.6rem 1rem;
    width: 240px;
    border: none;
    border-radius: 24px;
    font-size: 1rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  }

  #searchButton {
    padding: 0.6rem 1.2rem;
    margin-left: 0.5rem;
    background-color: #4a90e2;
    border: none;
    border-radius: 24px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease;
  }

  #searchButton:hover {
    background-color: #357ABD;
  }

  #map {
    height: 450px;
    margin: 1rem 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  }

  #weatherContainer {
    margin: 1rem 2rem 2rem;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: center;
  }

  .city-weather {
    background: rgba(255 255 255 / 0.85);
    border-radius: 12px;
    padding: 1rem 1.5rem;
    width: 180px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    text-align: center;
    font-weight: 600;
    cursor: default;
    transition: transform 0.2s ease;
  }
  .city-weather:hover {
    transform: scale(1.05);
  }

  .city-weather h3 {
    margin: 0 0 0.3rem 0;
    font-weight: 700;
  }

  .temp {
    font-size: 1.6rem;
    margin: 0.3rem 0;
  }

  .desc {
    font-style: italic;
    color: #555;
    margin-bottom: 0.6rem;
  }

  footer {
    text-align: center;
    padding: 1rem;
    font-size: 0.9rem;
    color: #444;
  }

  @media (max-width: 600px) {
    #weatherContainer {
      flex-direction: column;
      align-items: center;
    }
    .city-weather {
      width: 90%;
    }
    #map {
      margin: 1rem;
      height: 350px;
    }
  }
</style>
</head>
<body>

<header>
  <h1>MapMyWeather</h1>
  <form id="searchForm" autocomplete="off">
    <input
      type="text"
      id="searchInput"
      placeholder="Enter city name (e.g. Tokyo)"
      required
      aria-label="Search city"
    />
    <button type="submit" id="searchButton">Search</button>
  </form>
</header>

<div id="map"></div>

<div id="weatherContainer">
  <!-- Weather panels for default cities will appear here -->
</div>

<footer>© 2025 MapMyWeather. Data from WeatherAPI.com</footer>

<!-- Leaflet JS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-o+UHIftIU1zHKk1nD4DXdEB0PsS7Aq7dDqJkQa0P9f0="
  crossorigin=""
></script>

<script>
  const WEATHER_API_KEY = "e110e528cbca47f7ac3104351251407";

  const cities = [
    { name: "New York", coords: [40.7128, -74.0060] },
    { name: "London", coords: [51.5074, -0.1278] },
    { name: "Tokyo", coords: [35.6762, 139.6503] },
    { name: "Sydney", coords: [-33.8688, 151.2093] },
    { name: "Paris", coords: [48.8566, 2.3522] },
    { name: "Singapore", coords: [1.3521, 103.8198] },
    { name: "Moscow", coords: [55.7558, 37.6173] },
    { name: "Rio de Janeiro", coords: [-22.9068, -43.1729] },
    { name: "Cape Town", coords: [-33.9249, 18.4241] },
    { name: "Dubai", coords: [25.2048, 55.2708] }
  ];

  const map = L.map("map").setView([20, 0], 2);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 18,
    attribution:
      '© <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
  }).addTo(map);

  cities.forEach(city => {
    const marker = L.marker(city.coords).addTo(map);
    marker.bindPopup(`<b>${city.name}</b>`);

    fetchWeather(city.name);
  });

  function fetchWeather(city) {
    const url = `https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(city)}`;

    fetch(url)
      .then(res => {
        if (!res.ok) throw new Error("City not found");
        return res.json();
      })
      .then(data => {
        displayCityWeather(data);
      })
      .catch(err => {
        console.error("Error fetching weather for", city, err);
      });
  }

  function displayCityWeather(data) {
    const container = document.getElementById("weatherContainer");

    const cityDiv = document.createElement("div");
    cityDiv.className = "city-weather";

    cityDiv.innerHTML = `
      <h3>${data.location.name}</h3>
      <div class="temp">${Math.round(data.current.temp_c)}°C</div>
      <div class="desc">${data.current.condition.text}</div>
      <div>Humidity: ${data.current.humidity}%</div>
      <div>Wind: ${Math.round(data.current.wind_kph)} km/h</div>
    `;

    container.appendChild(cityDiv);
  }

  document.getElementById("searchForm").addEventListener("submit", (e) => {
    e.preventDefault();
    const city = document.getElementById("searchInput").value.trim();
    if (city) {
      window.location.href = `weather.html?city=${encodeURIComponent(city)}`;
    }
  });
</script>

</body>
</html>

