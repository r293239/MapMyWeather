<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MapMyWeather - Interactive World Weather Map & Forecast</title>

<meta name="description" content="Explore live weather worldwide with MapMyWeather. Interactive map, city forecasts, and free weather data powered by WeatherAPI.com." />
<meta name="keywords" content="weather, world weather map, weather forecast, free weather, city weather, weather app, interactive map" />
<meta name="author" content="Reuben" />
<meta name="robots" content="index, follow" />

<!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-sA+Q0HQ8xcrShdF1b3yWbUPkYQJrP2fM7D5Jv4f4bjo="
  crossorigin=""
/>

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
    color: #222;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  header {
    background: rgba(255 255 255 / 0.8);
    padding: 1rem 2rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    text-align: center;
  }

  header h1 {
    margin: 0 0 0.25rem 0;
    font-weight: 700;
  }

  header p {
    margin: 0 0 1rem 0;
    font-size: 1.1rem;
    color: #333;
  }

  #searchForm {
    margin: 0 auto 1.5rem auto;
    max-width: 400px;
    display: flex;
    justify-content: center;
  }

  #searchInput {
    flex-grow: 1;
    padding: 0.6rem 1rem;
    border: none;
    border-radius: 24px 0 0 24px;
    font-size: 1rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    outline-offset: 2px;
  }

  #searchButton {
    padding: 0.6rem 1.2rem;
    background-color: #4a90e2;
    border: none;
    border-radius: 0 24px 24px 0;
    color: white;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease;
  }

  #searchButton:hover {
    background-color: #357ABD;
  }

  main {
    flex: 1;
    max-width: 900px;
    margin: 0 auto 2rem;
    padding: 0 1rem;
    width: 100%;
  }

  #map {
    height: 450px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  }

  #weatherContainer {
    margin-top: 1rem;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: center;
  }

  .city-weather {
    background: rgba(255 255 255 / 0.9);
    border-radius: 12px;
    padding: 1rem 1.5rem;
    width: 180px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    text-align: center;
    font-weight: 600;
    cursor: default;
    transition: transform 0.2s ease;
  }
  .city-weather:hover {
    transform: scale(1.05);
  }

  .city-weather h3 {
    margin: 0 0 0.3rem 0;
    font-weight: 700;
  }

  .temp {
    font-size: 1.6rem;
    margin: 0.3rem 0;
  }

  .desc {
    font-style: italic;
    color: #555;
    margin-bottom: 0.6rem;
  }

  section#about {
    background: rgba(255 255 255 / 0.8);
    border-radius: 12px;
    padding: 1.5rem 2rem;
    margin: 2rem auto;
    max-width: 700px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  }

  section#about h2 {
    margin-top: 0;
    font-weight: 700;
    color: #222;
  }

  section#about p {
    font-size: 1rem;
    color: #333;
    line-height: 1.5;
  }

  footer {
    text-align: center;
    padding: 1rem;
    font-size: 0.9rem;
    color: #444;
    background: rgba(255 255 255 / 0.7);
  }

  @media (max-width: 600px) {
    #weatherContainer {
      flex-direction: column;
      align-items: center;
    }
    .city-weather {
      width: 90%;
    }
    #map {
      height: 350px;
    }
    #searchForm {
      flex-direction: column;
      max-width: 300px;
    }
    #searchInput, #searchButton {
      border-radius: 24px;
      width: 100%;
      margin: 0.3rem 0;
    }
  }
</style>
</head>
<body>

<header>
  <h1>MapMyWeather</h1>
  <p>Your interactive world weather map. Search cities and get free real-time weather forecasts powered by WeatherAPI.com.</p>
  <form id="searchForm" autocomplete="off" role="search" aria-label="Search weather by city">
    <input
      type="search"
      id="searchInput"
      name="city"
      placeholder="Enter city name (e.g. Tokyo)"
      required
      aria-required="true"
      aria-label="Search city"
    />
    <button type="submit" id="searchButton" aria-label="Search weather">Search</button>
  </form>
</header>

<main>
  <div id="map" aria-label="Interactive world map showing cities"></div>

  <section id="weatherContainer" aria-live="polite" aria-relevant="additions">
    <!-- Weather panels for default cities will be inserted here -->
  </section>

  <section id="about">
    <h2>About MapMyWeather</h2>
    <p>
      MapMyWeather lets you explore current weather conditions worldwide on an interactive map. Click on city markers to view live weather updates or search any city to get detailed forecasts.
      All weather data is powered by WeatherAPI.com, providing accurate and up-to-date information for your convenience.
    </p>
  </section>
</main>

<footer>© 2025 MapMyWeather. Data from WeatherAPI.com</footer>

<!-- Leaflet JS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-o+UHIftIU1zHKk1nD4DXdEB0PsS7Aq7dDqJkQa0P9f0="
  crossorigin=""
></script>

<script>
  const WEATHER_API_KEY = "e110e528cbca47f7ac3104351251407";

  const cities = [
    { name: "New York", coords: [40.7128, -74.0060] },
    { name: "London", coords: [51.5074, -0.1278] },
    { name: "Tokyo", coords: [35.6762, 139.6503] },
    { name: "Sydney", coords: [-33.8688, 151.2093] },
    { name: "Paris", coords: [48.8566, 2.3522] },
    { name: "Singapore", coords: [1.3521, 103.8198] },
    { name: "Moscow", coords: [55.7558, 37.6173] },
    { name: "Rio de Janeiro", coords: [-22.9068, -43.1729] },
    { name: "Cape Town", coords: [-33.9249, 18.4241] },
    { name: "Dubai", coords: [25.2048, 55.2708] }
  ];

  // Initialize map
  const map = L.map("map").setView([20, 0], 2);

  // OpenStreetMap tiles
  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 18,
    attribution:
      '© <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
  }).addTo(map);

  // Add markers and fetch weather
  cities.forEach(city => {
    const marker = L.marker(city.coords).addTo(map);
    marker.bindPopup(`<b>${city.name}</b>`);

    fetchWeather(city.name);
  });

  // Fetch weather for city
  function fetchWeather(city) {
    const url = `https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(city)}`;

    fetch(url)
      .then(res => {
        if (!res.ok) throw new Error("City not found");
        return res.json();
      })
      .then(data => {
        displayCityWeather(data);
      })
      .catch(err => {
        console.error("Error fetching weather for", city, err);
      });
  }

  // Display weather panels
  function displayCityWeather(data) {
    const container = document.getElementById("weatherContainer");

    const cityDiv = document.createElement("div");
    cityDiv.className = "city-weather";

    cityDiv.innerHTML = `
      <h3>${data.location.name}</h3>
      <div class="temp">${Math.round(data.current.temp_c)}°C</div>
      <div class="desc">${data.current.condition.text}</div>
      <div>Humidity: ${data.current.humidity}%</div>
      <div>Wind: ${Math.round(data.current.wind_kph)} km/h</div>
    `;

    container.appendChild(cityDiv);
  }

  // Search form submit
  document.getElementById("searchForm").addEventListener("submit", e => {
    e.preventDefault();
    const city = document.getElementById("searchInput").value.trim();
    if (city) {
      window.location.href = `weather.html?city=${encodeURIComponent(city)}`;
    }
  });
</script>

</body>
</html>
