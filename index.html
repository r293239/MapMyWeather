
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic meta -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MapMyWeather ‚Äî Global Interactive Weather Map | Live Forecasts & Radar</title>
  <meta name="description" content="Free interactive world weather map with live forecasts. Check temperature, wind, rain, and humidity for any city worldwide. Real-time weather data from WeatherAPI.">
  <meta name="keywords" content="weather, weather map, live weather, world weather, temperature, forecast, wind, rain, humidity, weather radar, global weather, local weather, weather today, weather forecast, weather API">

  <!-- Canonical (important if same content appears elsewhere) -->
  <link rel="canonical" href="https://map-my-weather.netlify.app/">

  <!-- Favicon / icons -->
  <link rel="icon" href="/favicon.png" type="image/png" sizes="512x512">
  <link rel="shortcut icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/favicon.png">

  <!-- Manifest (optional but good for PWA / mobile shortcuts) -->
  <link rel="manifest" href="/site.webmanifest">

  <!-- Social (Open Graph) -->
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MapMyWeather ‚Äî Global Interactive Weather Map | Live Forecasts" />
  <meta property="og:description" content="Free interactive world weather map with live forecasts, temperature, wind, rain and humidity data for any location worldwide." />
  <meta property="og:url" content="https://map-my-weather.netlify.app/" />
  <meta property="og:site_name" content="MapMyWeather" />
  <meta property="og:image" content="https://map-my-weather.netlify.app/og-image.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="MapMyWeather ‚Äî Global Interactive Weather Map">
  <meta name="twitter:description" content="Free interactive world weather map with live forecasts, temperature, wind, and rain data.">
  <meta name="twitter:image" content="https://map-my-weather.netlify.app/og-image.png">

  <!-- Robots -->
  <meta name="robots" content="index, follow, max-image-preview:large">

  <!-- Additional SEO Meta -->
  <meta name="author" content="MapMyWeather">
  <meta name="theme-color" content="#4a90e2">
  <meta name="subject" content="Weather forecasts and maps">
  <meta name="rating" content="General">
  <meta name="revisit-after" content="1 day">
  
  <!-- Geo and Location Meta -->
  <meta name="geo.region" content="Global">
  <meta name="geo.placename" content="Worldwide">

  <!-- Structured data (JSON-LD) - Enhanced for Weather Service -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "@id": "https://map-my-weather.netlify.app/#organization",
        "name": "MapMyWeather",
        "url": "https://map-my-weather.netlify.app/",
        "logo": "https://map-my-weather.netlify.app/favicon.png",
        "description": "Interactive global weather map providing live forecasts and weather data",
        "sameAs": []
      },
      {
        "@type": "WebSite",
        "@id": "https://map-my-weather.netlify.app/#website",
        "url": "https://map-my-weather.netlify.app/",
        "name": "MapMyWeather",
        "description": "Interactive global weather map with live forecasts, temperature, wind and rain overlays.",
        "publisher": { "@id": "https://map-my-weather.netlify.app/#organization" },
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://map-my-weather.netlify.app/?s={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      },
      {
        "@type": "Service",
        "name": "Weather Forecast Service",
        "description": "Real-time weather forecasts and interactive weather maps for locations worldwide",
        "provider": { "@id": "https://map-my-weather.netlify.app/#organization" },
        "areaServed": "Worldwide",
        "serviceType": "Weather Forecasting"
      }
    ]
  }
  </script>

</head>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin=""
  />

  <style>
    :root {
      --primary: #4a90e2;
      --primary-dark: #357ABD;
      --secondary: #ff7043;
      --secondary-dark: #e64a19;
      --accent: #f0ad4e;
      --accent-dark: #ec971f;
      --danger: #d9534f;
      --danger-dark: #c9302c;
      --light: #f8f9fa;
      --dark: #343a40;
      --gray: #6c757d;
      --success: #28a745;
      --search-bg: rgba(255, 255, 255, 0.15);
      --search-focus-bg: rgba(255, 255, 255, 0.25);
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
      color: var(--dark);
      line-height: 1.6;
    }

    header {
      padding: 1.5rem 2rem;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 249, 250, 0.98) 100%);
      text-align: center;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      backdrop-filter: blur(15px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.3);
    }

    header h1 {
      margin: 0;
      font-size: 2.4rem;
      flex-basis: 100%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 800;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      letter-spacing: -0.5px;
    }

    header p {
      margin: 0 0 1.5rem 0;
      font-size: 1.2rem;
      flex-basis: 100%;
      color: var(--gray);
      font-weight: 400;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Enhanced Search Container */
    .search-container {
      max-width: 800px;
      width: 100%;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 1.5rem;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    #searchForm {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      position: relative;
    }

    .search-input-wrapper {
      position: relative;
      flex: 1;
    }

    #searchInput {
      width: 100%;
      padding: 1.2rem 1.5rem 1.2rem 3.5rem;
      border: 2px solid rgba(74, 144, 226, 0.2);
      border-radius: 15px;
      font-size: 1.1rem;
      background: var(--search-bg);
      backdrop-filter: blur(5px);
      color: var(--dark);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    }

    #searchInput:focus {
      outline: none;
      border-color: var(--primary);
      background: var(--search-focus-bg);
      box-shadow: 0 6px 25px rgba(74, 144, 226, 0.25);
      transform: translateY(-1px);
    }

    #searchInput::placeholder {
      color: rgba(108, 117, 125, 0.7);
      font-weight: 400;
    }

    .search-icon {
      position: absolute;
      left: 1.2rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary);
      font-size: 1.2rem;
      z-index: 2;
    }

    .search-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    #searchButton {
      flex: 1;
      padding: 1rem 1.8rem;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border: none;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
    }

    #searchButton:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(74, 144, 226, 0.4);
      background: linear-gradient(135deg, var(--primary-dark), #2a6db5);
    }

    #searchButton:active {
      transform: translateY(0);
      box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
    }

    #gameButton {
      flex: 1;
      padding: 1rem 1.8rem;
      background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
      border: none;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      box-shadow: 0 4px 15px rgba(255, 112, 67, 0.3);
    }

    #gameButton:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255, 112, 67, 0.4);
      background: linear-gradient(135deg, var(--secondary-dark), #cc3d13);
    }

    #gameButton:active {
      transform: translateY(0);
      box-shadow: 0 4px 15px rgba(255, 112, 67, 0.3);
    }

    #settingsBtn {
      padding: 0.8rem 1.5rem;
      background: linear-gradient(135deg, var(--gray), #5a6268);
      border: none;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 130px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
    }

    #settingsBtn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(108, 117, 125, 0.4);
      background: linear-gradient(135deg, #5a6268, #495057);
    }

    .quick-search-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      margin-top: 1rem;
      justify-content: center;
    }

    .quick-search-tag {
      padding: 0.5rem 1rem;
      background: rgba(74, 144, 226, 0.1);
      border: 1px solid rgba(74, 144, 226, 0.2);
      border-radius: 20px;
      color: var(--primary);
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .quick-search-tag:hover {
      background: rgba(74, 144, 226, 0.2);
      transform: translateY(-1px);
    }

    .quick-search-tag:active {
      transform: translateY(0);
    }

    #settingsModal {
      display: none;
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
      z-index: 10000;
      min-width: 320px;
      text-align: center;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    #settingsModal.show {
      display: block;
      animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translate(-50%, -20px);
      }
      to {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }

    #settingsModal label {
      font-weight: 600;
      margin-bottom: 1rem;
      display: block;
      color: var(--dark);
      font-size: 1.2rem;
    }

    #settingsModal select {
      width: 100%;
      padding: 0.9rem;
      font-size: 1rem;
      border-radius: 10px;
      border: 2px solid #e9ecef;
      margin-bottom: 1.5rem;
      transition: all 0.3s;
      background: white;
    }

    #settingsModal select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
    }

    #settingsModal button {
      padding: 0.9rem 2rem;
      border: none;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
      width: 100%;
    }

    #settingsModal button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(74, 144, 226, 0.4);
    }

    main {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1.5rem;
    }

    #map {
      height: 500px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      overflow: hidden;
      margin-bottom: 2rem;
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    /* City weather section */
    #citiesWeatherSection {
      margin-top: 1.5rem;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    #citiesWeatherSection h2 {
      margin-top: 0;
      color: var(--dark);
      border-bottom: 2px solid var(--primary);
      padding-bottom: 0.8rem;
      font-size: 1.8rem;
    }

    #citiesWeatherContainer {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      justify-content: center;
    }

    /* Favorite section right below map */
    #favoritesSection {
      margin-top: 1.5rem;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    #favoritesSection h2 {
      margin-top: 0;
      color: var(--dark);
      border-bottom: 2px solid var(--primary);
      padding-bottom: 0.8rem;
      font-size: 1.8rem;
    }

    #addFavoriteForm {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    #addFavoriteInput {
      flex-grow: 1;
      padding: 1rem 1.5rem;
      border-radius: 15px;
      border: 2px solid rgba(240, 173, 78, 0.2);
      font-size: 1rem;
      min-width: 200px;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.9);
    }
    
    #addFavoriteInput:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(240, 173, 78, 0.1);
    }

    #addFavoriteBtn {
      padding: 1rem 2rem;
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      border: none;
      border-radius: 15px;
      color: white;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      min-width: 160px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(240, 173, 78, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    #addFavoriteBtn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(240, 173, 78, 0.4);
    }

    #favoritesContainer {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      justify-content: center;
    }

    .city-weather {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 1.5rem;
      width: 240px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      cursor: pointer;
      position: relative;
      transition: all 0.3s ease;
      border-top: 4px solid var(--primary);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .city-weather:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    }

    .city-weather h3 {
      margin-top: 0;
      color: var(--dark);
      font-size: 1.2rem;
      font-weight: 600;
    }

    .temp {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      margin: 0.8rem 0;
    }

    .desc {
      font-style: italic;
      color: var(--gray);
      margin-bottom: 0.8rem;
      font-size: 1rem;
    }
    
    .details {
      display: flex;
      justify-content: space-around;
      font-size: 0.85rem;
      color: var(--gray);
      margin-bottom: 0.8rem;
      padding: 0.5rem 0;
      border-top: 1px solid rgba(0,0,0,0.1);
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .remove-fav-btn {
      background: linear-gradient(135deg, var(--danger), var(--danger-dark));
      color: white;
      border: none;
      border-radius: 50%;
      font-size: 14px;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      position: absolute;
      top: 12px;
      right: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(217, 83, 79, 0.3);
    }

    .remove-fav-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 5px 15px rgba(217, 83, 79, 0.4);
    }

    #about {
      margin-top: 2.5rem;
      background: rgba(255, 255, 255, 0.95);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }
    
    #about h2 {
      color: var(--dark);
      border-bottom: 2px solid var(--primary);
      padding-bottom: 0.8rem;
      font-size: 1.8rem;
    }

    #about p {
      font-size: 1.1rem;
      line-height: 1.7;
    }

    footer {
      text-align: center;
      padding: 2rem;
      font-size: 1rem;
      color: var(--gray);
      margin-top: 3rem;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(0,0,0,0.1);
    }

    #feedbackBtn {
      position: fixed;
      bottom: 25px;
      right: 25px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      padding: 1rem 2rem;
      border: none;
      border-radius: 50px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 9999;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    #feedbackBtn:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 12px 35px rgba(0,0,0,0.4);
    }

    @media (max-width: 768px) {
      header {
        padding: 1.2rem;
      }
      
      header h1 {
        font-size: 1.8rem;
      }
      
      header p {
        font-size: 1rem;
        margin-bottom: 1rem;
      }
      
      .search-container {
        padding: 1.2rem;
        border-radius: 16px;
      }
      
      #searchInput {
        padding: 1rem 1.2rem 1rem 3rem;
        font-size: 1rem;
      }
      
      .search-buttons {
        flex-direction: column;
      }
      
      #searchButton, #gameButton, #settingsBtn {
        width: 100%;
      }
      
      .quick-search-tags {
        gap: 0.6rem;
      }
      
      .quick-search-tag {
        font-size: 0.85rem;
        padding: 0.4rem 0.8rem;
      }
      
      #citiesWeatherContainer,
      #favoritesContainer {
        flex-direction: column;
        align-items: center;
      }
      
      .city-weather {
        width: 100%;
        max-width: 300px;
      }
    }
  </style>
</head>
<body>

<header>
  <h1 id="title">MapMyWeather</h1>
  <p id="subtitle">Explore real-time weather worldwide or search any city below</p>
  
  <div class="search-container">
    <form id="searchForm">
      <div class="search-input-wrapper">
        <span class="search-icon">üîç</span>
        <input type="search" id="searchInput" placeholder="Search a city (e.g. London, Tokyo, New York)" required />
      </div>
      
      <div class="search-buttons">
        <button type="submit" id="searchButton">
          <span>Search Weather</span>
          <span>üå§Ô∏è</span>
        </button>
        <button type="button" id="gameButton" onclick="location.href='game.html'">
          <span>üéÆ Play WeatherGuessr</span>
        </button>
        <button type="button" id="settingsBtn">
          <span>‚öôÔ∏è Settings</span>
        </button>
      </div>
      
      <div class="quick-search-tags">
        <span class="quick-search-tag" onclick="searchCity('London')">London</span>
        <span class="quick-search-tag" onclick="searchCity('New York')">New York</span>
        <span class="quick-search-tag" onclick="searchCity('Tokyo')">Tokyo</span>
        <span class="quick-search-tag" onclick="searchCity('Paris')">Paris</span>
        <span class="quick-search-tag" onclick="searchCity('Sydney')">Sydney</span>
        <span class="quick-search-tag" onclick="searchCity('Dubai')">Dubai</span>
        <span class="quick-search-tag" onclick="searchCity('Singapore')">Singapore</span>
      </div>
    </form>
  </div>
</header>

<main>
  <div id="map"></div>

  <!-- New Cities Weather Section -->
  <section id="citiesWeatherSection">
    <h2 id="citiesWeatherTitle">Global Cities Weather</h2>
    <div id="citiesWeatherContainer">
      <!-- City weather cards will be rendered here -->
    </div>
  </section>

  <!-- Favorites Section -->
  <section id="favoritesSection">
    <h2 id="favoritesTitle">Your Favorite Locations</h2>
    <form id="addFavoriteForm">
      <input type="text" id="addFavoriteInput" placeholder="Add a city to favorites" required />
      <button type="submit" id="addFavoriteBtn">
        <span>‚≠ê Add to Favorites</span>
      </button>
    </form>
    <div id="favoritesContainer">
      <!-- Favorite cities weather cards will be rendered here -->
    </div>
  </section>

  <section id="about">
    <h2 id="aboutTitle">About MapMyWeather</h2>
    <p id="aboutText">
      MapMyWeather is an interactive world map showing current weather conditions for major global cities.
      Click on any marker to learn more about the weather there, or use the search bar to view a detailed forecast.
      This app is powered by <strong>WeatherAPI.com</strong> and is entirely free to use.
    </p>
  </section>
</main>

<footer>
  ¬© 2025 MapMyWeather | Built by Reuben | Data from WeatherAPI.com
</footer>

<!-- Feedback Button -->
<a id="feedbackBtn" href="https://docs.google.com/forms/d/1Sr-6EWcdBa7Hst9nyJLvTz7oU-eGozoYBpZTMKj7_mU/viewform" target="_blank">
  <span>üí¨ Help Us Improve</span>
</a>

<!-- Settings Modal -->
<div id="settingsModal" role="dialog" aria-modal="true" aria-labelledby="settingsModalLabel">
  <label for="languageSelect" id="settingsModalLabel">Select Language</label>
  <select id="languageSelect" aria-describedby="settingsModalLabel">
    <option value="en">English</option>
    <option value="zh">‰∏≠Êñá (Chinese)</option>
    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
    <option value="es">Espa√±ol (Spanish)</option>
    <option value="fr">Fran√ßais (French)</option>
    <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
    <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
    <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
    <option value="pt">Portugu√™s (Portuguese)</option>
    <option value="id">Bahasa Indonesia (Indonesian)</option>
    <option value="ur">ÿßÿ±ÿØŸà (Urdu)</option>
    <option value="de">Deutsch (German)</option>
    <option value="ja">Êó•Êú¨Ë™û (Japanese)</option>
  </select>
  <button id="saveSettingsBtn">Save Changes</button>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
  const WEATHER_API_KEY = "e110e528cbca47f7ac3104351251407";

  // Quick search function
  function searchCity(city) {
    document.getElementById('searchInput').value = city;
    window.location.href = `weather.html?city=${encodeURIComponent(city)}`;
  }

  // Translations dictionary for UI text
  const translations = {
    en: {
      title: "MapMyWeather",
      subtitle: "Explore real-time weather worldwide or search any city below",
      searchPlaceholder: "Search a city (e.g. London, Tokyo, New York)",
      searchButton: "Search Weather",
      gameButton: "üéÆ Play WeatherGuessr",
      settingsBtn: "‚öôÔ∏è Settings",
      citiesWeatherTitle: "Global Cities Weather",
      favoritesTitle: "Your Favorite Locations",
      addFavoritePlaceholder: "Add a city to favorites",
      addFavoriteBtn: "‚≠ê Add to Favorites",
      aboutTitle: "About MapMyWeather",
      aboutText: "MapMyWeather is an interactive world map showing current weather conditions for major global cities. Click on any marker to learn more about the weather there, or use the search bar to view a detailed forecast. This app is powered by WeatherAPI.com and is entirely free to use.",
      noFavorites: "No favorite locations yet. Add your first city above!",
      removeFavTitle: "Remove from favorites",
      settingsLabel: "Select Language",
      saveBtn: "Save Changes",
      humidity: "Humidity",
      wind: "Wind",
      feelsLike: "Feels like",
      lastUpdated: "Updated"
    },
    pt: {
      title: "MapMeuTempo",
      subtitle: "Explore o clima em tempo real mundialmente ou pesquise qualquer cidade abaixo",
      searchPlaceholder: "Pesquise uma cidade (ex: Londres, T√≥quio, Nova York)",
      searchButton: "Pesquisar Clima",
      gameButton: "üéÆ Jogar WeatherGuessr",
      settingsBtn: "‚öôÔ∏è Configura√ß√µes",
      citiesWeatherTitle: "Clima das Cidades Globais",
      favoritesTitle: "Seus locais favoritos",
      addFavoritePlaceholder: "Adicione uma cidade aos favoritos",
      addFavoriteBtn: "‚≠ê Adicionar aos Favoritos",
      aboutTitle: "Sobre o MapMeuTempo",
      aboutText: "MapMeuTempo √© um mapa interativo mundial que mostra condi√ß√µes clim√°ticas atuais para as principais cidades globais. Clique em qualquer marcador para saber mais sobre o clima, ou use a barra de pesquisa para ver a previs√£o detalhada. Este app √© alimentado pelo WeatherAPI.com e √© totalmente gratuito.",
      noFavorites: "Nenhum local favorito ainda. Adicione sua primeira cidade acima!",
      removeFavTitle: "Remover dos favoritos",
      settingsLabel: "Selecione o idioma",
      saveBtn: "Salvar Altera√ß√µes",
      humidity: "Umidade",
      wind: "Vento",
      feelsLike: "Sensa√ß√£o",
      lastUpdated: "Atualizado"
    },
    es: {
      title: "MapaMiClima",
      subtitle: "Explore el clima en tiempo real en todo el mundo o busque cualquier ciudad a continuaci√≥n",
      searchPlaceholder: "Buscar una ciudad (ej: Londres, Tokio, Nueva York)",
      searchButton: "Buscar Clima",
      gameButton: "üéÆ Jugar WeatherGuessr",
      settingsBtn: "‚öôÔ∏è Configuraci√≥n",
      citiesWeatherTitle: "Clima de Ciudades Globales",
      favoritesTitle: "Tus ubicaciones favoritas",
      addFavoritePlaceholder: "Agregar una ciudad a favoritos",
      addFavoriteBtn: "‚≠ê Agregar a Favoritos",
      aboutTitle: "Acerca de MapaMiClima",
      aboutText: "MapaMiClima es un mapa mundial interactivo que muestra las condiciones clim√°ticas actuales para las principales ciudades globales. Haga clic en cualquier marcador para obtener m√°s informaci√≥n sobre el clima all√≠, o use la barra de b√∫squeda para ver un pron√≥stico detallado. Esta aplicaci√≥n funciona con WeatherAPI.com y es completamente gratuita.",
      noFavorites: "A√∫n no hay ubicaciones favoritas. ¬°Agrega tu primera ciudad arriba!",
      removeFavTitle: "Eliminar de favoritos",
      settingsLabel: "Seleccionar idioma",
      saveBtn: "Guardar Cambios",
      humidity: "Humedad",
      wind: "Viento",
      feelsLike: "Sensaci√≥n t√©rmica",
      lastUpdated: "Actualizado"
    }
  };

  // Detect or load language from localStorage
  let lang = localStorage.getItem("mapmyweather_language") || "en";

  // Set language UI texts
  function applyTranslations() {
    const t = translations[lang];
    document.getElementById("title").textContent = t.title;
    document.getElementById("subtitle").textContent = t.subtitle;
    document.getElementById("searchInput").placeholder = t.searchPlaceholder;
    document.getElementById("searchButton").innerHTML = `<span>${t.searchButton}</span> <span>üå§Ô∏è</span>`;
    document.getElementById("gameButton").innerHTML = `<span>${t.gameButton}</span>`;
    document.getElementById("settingsBtn").innerHTML = `<span>${t.settingsBtn}</span>`;
    document.getElementById("citiesWeatherTitle").textContent = t.citiesWeatherTitle;
    document.getElementById("favoritesTitle").textContent = t.favoritesTitle;
    document.getElementById("addFavoriteInput").placeholder = t.addFavoritePlaceholder;
    document.getElementById("addFavoriteBtn").innerHTML = `<span>${t.addFavoriteBtn}</span>`;
    document.getElementById("aboutTitle").textContent = t.aboutTitle;
    document.getElementById("aboutText").textContent = t.aboutText;
    document.getElementById("settingsModalLabel").textContent = t.settingsLabel;
    document.getElementById("saveSettingsBtn").textContent = t.saveBtn;
    
    // Update quick search tags based on language
    updateQuickSearchTags();
  }

  function updateQuickSearchTags() {
    const tags = document.querySelectorAll('.quick-search-tag');
    const cities = ['London', 'New York', 'Tokyo', 'Paris', 'Sydney', 'Dubai', 'Singapore'];
    cities.forEach((city, index) => {
      if (tags[index]) {
        tags[index].textContent = city;
        tags[index].onclick = () => searchCity(city);
      }
    });
  }

  applyTranslations();

  // Initialize map and cities
  const cities = [
    { name: "New York", coords: [40.7128, -74.0060] },
    { name: "London", coords: [51.5074, -0.1278] },
    { name: "Tokyo", coords: [35.6762, 139.6503] },
    { name: "Sydney", coords: [-33.8688, 151.2093] },
    { name: "Singapore", coords: [1.3521, 103.8198] },
    { name: "Paris", coords: [48.8566, 2.3522] },
    { name: "Dubai", coords: [25.276987, 55.296249] },
    { name: "Toronto", coords: [43.65107, -79.347015] },
    { name: "Rio de Janeiro", coords: [-22.9068, -43.1729] },
    { name: "Cape Town", coords: [-33.9249, 18.4241] },
    { name: "Moscow", coords: [55.7558, 37.6173] },
    { name: "Istanbul", coords: [41.0082, 28.9784] }
  ];

  const map = L.map("map").setView([20, 0], 2);
  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 18,
    attribution: "¬© OpenStreetMap contributors"
  }).addTo(map);

  // Create markers for cities
  cities.forEach(city => {
    const marker = L.marker(city.coords).addTo(map);
    
    // Fetch weather for popup
    fetch(`https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(city.name)}`)
      .then(res => res.json())
      .then(data => {
        const t = translations[lang];
        marker.bindPopup(`
          <div style="text-align: center; min-width: 180px; padding: 10px;">
            <h3 style="margin: 0 0 10px 0; color: #333; font-size: 1.2rem;">${data.location.name}</h3>
            <div style="font-size: 2rem; font-weight: bold; color: #4a90e2; margin: 10px 0;">
              ${Math.round(data.current.temp_c)}¬∞C
            </div>
            <div style="font-style: italic; color: #666; margin: 8px 0; font-size: 1rem;">
              ${data.current.condition.text}
            </div>
            <div style="font-size: 0.9rem; color: #888; margin: 5px 0;">
              ${t.feelsLike}: ${Math.round(data.current.feelslike_c)}¬∞C
            </div>
            <div style="font-size: 0.85rem; color: #999; margin-top: 12px; padding-top: 8px; border-top: 1px solid #eee;">
              ${t.humidity}: ${data.current.humidity}% | ${t.wind}: ${data.current.wind_kph} km/h
            </div>
            <button onclick="window.location.href='weather.html?city=${encodeURIComponent(city.name)}'" 
                    style="margin-top: 15px; padding: 8px 16px; background: #4a90e2; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
              View Details
            </button>
          </div>
        `);
      })
      .catch(err => {
        marker.bindPopup(`
          <div style="text-align: center; min-width: 150px;">
            <strong>${city.name}</strong><br>Weather data unavailable
          </div>
        `);
      });

    marker.on("click", () => {
      window.location.href = `weather.html?city=${encodeURIComponent(city.name)}`;
    });
  });

  // Render cities weather cards
  function renderCitiesWeather() {
    const container = document.getElementById("citiesWeatherContainer");
    container.innerHTML = "";
    const t = translations[lang];

    cities.forEach(city => {
      const div = document.createElement("div");
      div.className = "city-weather";
      div.title = `View detailed weather for ${city.name}`;
      div.tabIndex = 0;
      div.setAttribute("role", "button");

      div.addEventListener("click", () => {
        window.location.href = `weather.html?city=${encodeURIComponent(city.name)}`;
      });
      div.addEventListener("keypress", e => {
        if (e.key === "Enter") {
          window.location.href = `weather.html?city=${encodeURIComponent(city.name)}`;
        }
      });

      // Fetch weather for each city
      fetch(`https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(city.name)}`)
        .then(res => {
          if (!res.ok) throw new Error("Weather not found");
          return res.json();
        })
        .then(data => {
          const updateTime = new Date(data.current.last_updated).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
          div.innerHTML = `
            <h3>${data.location.name}</h3>
            <div class="temp">${Math.round(data.current.temp_c)}¬∞C</div>
            <div class="desc">${data.current.condition.text}</div>
            <div class="details">
              <span>${t.humidity}: ${data.current.humidity}%</span>
              <span>${t.wind}: ${data.current.wind_kph} km/h</span>
            </div>
            <div style="font-size: 0.75rem; color: #999; margin-top: 10px; font-style: italic;">
              ${t.lastUpdated}: ${updateTime}
            </div>
          `;
          container.appendChild(div);
        })
        .catch(() => {
          div.innerHTML = `
            <h3>${city.name}</h3>
            <p>‚ùå Weather data unavailable</p>
          `;
          container.appendChild(div);
        });
    });
  }

  // Favorites management
  function getFavorites() {
    return JSON.parse(localStorage.getItem("mapmyweather_favorites") || "[]");
  }

  function saveFavorites(favorites) {
    localStorage.setItem("mapmyweather_favorites", JSON.stringify(favorites));
  }

  function addFavorite(city) {
    const favorites = getFavorites();
    if (!favorites.includes(city)) {
      favorites.push(city);
      saveFavorites(favorites);
      renderFavorites();
    }
  }

  function removeFavorite(city) {
    let favorites = getFavorites();
    favorites = favorites.filter(c => c.toLowerCase() !== city.toLowerCase());
    saveFavorites(favorites);
    renderFavorites();
  }

  // Render favorite cities weather
  function renderFavorites() {
    const container = document.getElementById("favoritesContainer");
    container.innerHTML = "";
    const favorites = getFavorites();
    const t = translations[lang];

    if (favorites.length === 0) {
      const noFav = document.createElement("p");
      noFav.textContent = t.noFavorites;
      noFav.style.textAlign = "center";
      noFav.style.color = "#666";
      noFav.style.fontStyle = "italic";
      noFav.style.padding = "2rem";
      container.appendChild(noFav);
      return;
    }

    favorites.forEach(city => {
      const div = document.createElement("div");
      div.className = "city-weather";
      div.title = city;
      div.tabIndex = 0;
      div.setAttribute("role", "button");
      div.setAttribute("aria-label", `${city}, ${t.removeFavTitle}`);

      div.addEventListener("click", () => {
        window.location.href = `weather.html?city=${encodeURIComponent(city)}`;
      });
      div.addEventListener("keypress", e => {
        if (e.key === "Enter") {
          window.location.href = `weather.html?city=${encodeURIComponent(city)}`;
        }
      });

      // Fetch weather for each favorite city
      fetch(`https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(city)}`)
        .then(res => {
          if (!res.ok) throw new Error("Weather not found");
          return res.json();
        })
        .then(data => {
          div.innerHTML = `
            <h3>${data.location.name}</h3>
            <div class="temp">${Math.round(data.current.temp_c)}¬∞C</div>
            <div class="desc">${data.current.condition.text}</div>
            <div class="details">
              <span>${t.humidity}: ${data.current.humidity}%</span>
              <span>${t.wind}: ${data.current.wind_kph} km/h</span>
            </div>
            <button class="remove-fav-btn" title="${t.removeFavTitle}" aria-label="${t.removeFavTitle}">‚úñ</button>
          `;
          container.appendChild(div);

          div.querySelector(".remove-fav-btn").addEventListener("click", e => {
            e.stopPropagation();
            removeFavorite(city);
          });
        })
        .catch(() => {
          div.innerHTML = `
            <h3>${city}</h3>
            <p>‚ùå Weather data unavailable</p>
            <button class="remove-fav-btn" title="${t.removeFavTitle}" aria-label="${t.removeFavTitle}">‚úñ</button>
          `;
          container.appendChild(div);

          div.querySelector(".remove-fav-btn").addEventListener("click", e => {
            e.stopPropagation();
            removeFavorite(city);
          });
        });
    });
  }

  // Initial renders
  renderCitiesWeather();
  renderFavorites();

  // Handle add favorite form submit
  document.getElementById("addFavoriteForm").addEventListener("submit", e => {
    e.preventDefault();
    const input = document.getElementById("addFavoriteInput");
    const cityName = input.value.trim();
    if (cityName) {
      addFavorite(cityName);
      input.value = "";
      // Show a success message
      const originalText = input.placeholder;
      input.placeholder = `‚úì Added "${cityName}" to favorites!`;
      setTimeout(() => {
        input.placeholder = originalText;
      }, 2000);
    }
  });

  // Handle search form submit (redirect to weather page)
  document.getElementById("searchForm").addEventListener("submit", e => {
    e.preventDefault();
    const city = document.getElementById("searchInput").value.trim();
    if (city) {
      window.location.href = `weather.html?city=${encodeURIComponent(city)}`;
    }
  });

  // Settings modal toggling
  const settingsBtn = document.getElementById("settingsBtn");
  const settingsModal = document.getElementById("settingsModal");
  const languageSelect = document.getElementById("languageSelect");
  const saveSettingsBtn = document.getElementById("saveSettingsBtn");

  // Initialize select with current lang
  languageSelect.value = lang;

  settingsBtn.addEventListener("click", () => {
    settingsModal.classList.toggle("show");
    languageSelect.focus();
  });

  // Close modal if click outside or Escape pressed
  window.addEventListener("click", e => {
    if (settingsModal.classList.contains("show") && !settingsModal.contains(e.target) && e.target !== settingsBtn) {
      settingsModal.classList.remove("show");
    }
  });

  window.addEventListener("keydown", e => {
    if (e.key === "Escape" && settingsModal.classList.contains("show")) {
      settingsModal.classList.remove("show");
    }
  });

  // Save settings and reload UI text
  saveSettingsBtn.addEventListener("click", () => {
    lang = languageSelect.value;
    localStorage.setItem("mapmyweather_language", lang);
    applyTranslations();
    renderCitiesWeather();
    renderFavorites();
    settingsModal.classList.remove("show");
  });
</script>

</body>
</html>
