<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MapMyWeather - Interactive Weather Map</title>

  <meta name="description" content="MapMyWeather is a free interactive map that shows live weather for major cities and lets you search any city for a forecast. Powered by WeatherAPI.com." />
  <meta name="keywords" content="weather, forecast, weather map, weather tracker, world map, free weather, interactive weather, city weather, global weather" />
  <meta name="author" content="Reuben" />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin=""
  />

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: linear-gradient(to right, #74ebd5, #ACB6E5);
      color: #222;
    }

    header {
      padding: 1rem 2rem;
      background: rgba(255, 255, 255, 0.85);
      text-align: center;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
    }

    header p {
      margin: 0.5rem 0 1rem;
      font-size: 1.1rem;
    }

    #searchForm {
      max-width: 400px;
      margin: 0 auto;
      display: flex;
    }

    #searchInput {
      flex-grow: 1;
      padding: 0.6rem 1rem;
      border: none;
      border-radius: 24px 0 0 24px;
      font-size: 1rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    #searchButton {
      padding: 0.6rem 1.2rem;
      background-color: #4a90e2;
      border: none;
      border-radius: 0 24px 24px 0;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #searchButton:hover {
      background-color: #357ABD;
    }

    main {
      max-width: 1000px;
      margin: 1rem auto;
      padding: 0 1rem;
    }

    #map {
      height: 450px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }

    #weatherContainer {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
      justify-content: center;
    }

    .city-weather {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 1rem;
      width: 200px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }

    .city-weather:hover {
      transform: scale(1.03);
    }

    .city-weather h3 {
      margin-top: 0;
    }

    .temp {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .desc {
      font-style: italic;
      color: #444;
    }

    #about {
      margin-top: 2rem;
      background: rgba(255, 255, 255, 0.9);
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      color: #444;
    }

    @media (max-width: 600px) {
      #weatherContainer {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>

<header>
  <h1>MapMyWeather</h1>
  <p>Explore real-time weather worldwide or search any city below</p>
  <form id="searchForm">
    <input type="search" id="searchInput" placeholder="Search a city (e.g. London)" required />
    <button type="submit" id="searchButton">Search</button>
  </form>
</header>

<main>
  <div id="map"></div>
  <div id="weatherContainer"></div>

  <section id="about">
    <h2>About MapMyWeather</h2>
    <p>
      MapMyWeather is an interactive world map showing current weather conditions for major global cities.
      Click on any marker to learn more about the weather there, or use the search bar to view a detailed forecast.
      This app is powered by <strong>WeatherAPI.com</strong> and is entirely free to use.
    </p>
  </section>
</main>

<footer>
  © 2025 MapMyWeather | Built by Reuben | Data from WeatherAPI.com
</footer>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
  const WEATHER_API_KEY = "e110e528cbca47f7ac3104351251407";

  const cities = [
    { name: "New York", coords: [40.7128, -74.0060] },
    { name: "London", coords: [51.5074, -0.1278] },
    { name: "Tokyo", coords: [35.6762, 139.6503] },
    { name: "Sydney", coords: [-33.8688, 151.2093] },
    { name: "Singapore", coords: [1.3521, 103.8198] },
    { name: "Paris", coords: [48.8566, 2.3522] },
    { name: "Dubai", coords: [25.276987, 55.296249] },
    { name: "Toronto", coords: [43.65107, -79.347015] },
    { name: "Rio de Janeiro", coords: [-22.9068, -43.1729] },
    { name: "Cape Town", coords: [-33.9249, 18.4241] }
  ];

  // Initialize map
  const map = L.map("map").setView([20, 0], 2);
  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 18,
    attribution: "© OpenStreetMap contributors"
  }).addTo(map);

  // Add markers and fetch weather
  cities.forEach(city => {
    const marker = L.marker(city.coords).addTo(map);
    marker.bindPopup(city.name);
    fetchWeather(city.name);
  });

  // Fetch and display weather
  function fetchWeather(cityName) {
    const url = `https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(cityName)}`;

    fetch(url)
      .then(response => {
        if (!response.ok) throw new Error("Weather not found");
        return response.json();
      })
      .then(data => displayWeather(data))
      .catch(err => {
        console.error(`Error loading weather for ${cityName}:`, err);
      });
  }

  function displayWeather(data) {
    const container = document.getElementById("weatherContainer");
    const div = document.createElement("div");
    div.className = "city-weather";
    div.innerHTML = `
      <h3>${data.location.name}</h3>
      <div class="temp">${Math.round(data.current.temp_c)}°C</div>
      <div class="desc">${data.current.condition.text}</div>
      <div>Humidity: ${data.current.humidity}%</div>
      <div>Wind: ${Math.round(data.current.wind_kph)} km/h</div>
    `;
    container.appendChild(div);
  }

  // Handle search form
  document.getElementById("searchForm").addEventListener("submit", e => {
    e.preventDefault();
    const city = document.getElementById("searchInput").value.trim();
    if (city) {
      window.location.href = `weather.html?city=${encodeURIComponent(city)}`;
    }
  });
</script>

</body>
</html>
